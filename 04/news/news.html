<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <link rel="stylesheet" href="../footer.css">
    <link rel="stylesheet" href="../header.css">
    <link rel="stylesheet" href="./news.css">
</head>

<body>
    <div class="news">
        <header>
            <div class="container">
                <div class="row">
                    <div class="col-md-8  col-xs-11">
                        <img src="../assets/logo.jpg" alt="" class="logo">
                        <div class="name">星美国际影城</div>
                    </div>
                    <div class="col-md-4  hidden-sm hidden-xs">
                        <ul class="nav nav-tabs">
                            <li role="presentation"><a href="../index.html">首页</a></li>
                            <li role="presentation" class="active"><a href="../news/news.html">新闻</a></li>
                            <li role="presentation"><a href="../aboutMe/about-me.html">关于我们</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-1  hidden-lg hidden-md">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                <li><a href="#">首页</a></li>
                                <li><a href="#">新闻</a></li>
                                <li><a href="#">关于我们</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="banner"><img src="../assets/Whats-new-banner-3.jpg" alt=""></div>
        <div class="content">
            <!-- 这里是列表渲染 -->
            <div class="content-item">
                <div class="item-left">
                    <img src="" alt="">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item">
                <div class="item-left">
                    <img src="" alt="">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item">
                <div class="item-left">
                    <img src="" alt="">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item">
                <div class="item-left">
                    <img src="" alt="">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="pagination">
                <button class="before">
                    << </button>
                        <span>1</span>
                        <span>2</span>
                        <span>3</span>
                        <button class="after"> >> </button>
            </div>
        </div>
        <footer>
            <div class="container footer">
                <div class="row information">
                    <div class="col-md-3 col-xs-6 info-item">
                        <img src="../assets/location.png" alt="" srcset="">
                        <div class="description clearfix">
                            成都市武侯区
                        </div>
                    </div>
                    <div class="col-md-3 col-xs-6 info-item">
                        <img src="../assets/emial.png" alt="" srcset="">
                        <div class="description clearfix">
                            email@admain.com.cn
                        </div>
                    </div>
                    <div class="col-md-3 col-xs-6 info-item">
                        <img src="../assets/telephone.png" alt="" srcset="">
                        <div class="description clearfix">
                            123-482-2684
                        </div>
                    </div>
                    <div class="col-md-3 col-xs-6 info-item special">
                        <img src="../assets/mmqrcode1627285639457.png" alt="" srcset="">
                        <div class="description clearfix">
                            扫一扫添加微信
                        </div>
                    </div>
                </div>
            </div>
            <div class="copyright">
                版权所有@Aoshisen
            </div>
        </footer>
    </div>
</body>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    let contentDatas;
    let contentItems = document.querySelectorAll(".content-item");
    console.log(contentItems);

    //页面渲染逻辑  
    let render = function (page) {
        // let page=2
        axios({
            method: "post",
            url: `https://api.apiopen.top/getWangYiNews?page=${page}&count=8`,
        }).then((res) => {
            contentDatas = res.data.result;
            console.log(contentDatas);
            contentItems.forEach((item, index) => {
                let img = item.querySelector(".item-left img");
                let intro = item.querySelector(".item-right .intro");
                let createAt = item.querySelector('.item-right .create-at')
                let detailed = item.querySelector(".item-right .detailed")
                img.src = contentDatas[index].image
                intro.innerHTML = contentDatas[index].title
                createAt.innerHTML = contentDatas[index].passtime
                detailed.innerHTML = contentDatas[index].title.repeat(6)
            })
        })
        let spans = document.querySelectorAll("span");
        spans.forEach((item, index) => {
            item.className = index == page ? "active" : ""
        })
    }
    render(1)

    //pagination 里面的跳转逻辑
    let currentPage = 1;
    let preButton = document.querySelector('.pagination .before');
    let afterButton = document.querySelector('.pagination .after');
    let spans = document.querySelectorAll("span")
    preButton.addEventListener('click', () => {
        currentPage = Math.max(1, --currentPage)
        render(currentPage)
    })
    afterButton.addEventListener('click', () => {
        currentPage = Math.min(3, ++currentPage)
        render(currentPage)
    })
    spans.forEach((item, index) => {
        item.addEventListener('click', function () {
            currentPage = item.innerHTML
            render(currentPage)
        })
    })

    //每一个新闻点击跳转详情页的逻辑
    contentItems.forEach((item, index) => {
        item.addEventListener("click", () => {
            let host = location.host
            window.location.href = `../newsDetail/news-detail.html?page=${currentPage}&id=${index}`
        })
    })
</script>

</html>