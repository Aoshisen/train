<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="../footer.css">
    <link rel="stylesheet" href="../header.css">
    <link rel="stylesheet" href="./news.css">
</head>

<body>
    <div class="news">
        <header>
            <div class="container">
                <div class="row">
                    <div class="col-md-8  col-xs-10">
                        <img src="../assets/logo.jpg" alt="" class="logo">
                        <div class="name">星美国际影城</div>
                    </div>
                    <div class="col-md-4  hidden-sm hidden-xs">
                        <ul class="nav nav-tabs">
                            <li role="presentation"><a href="../index.html">首页</a></li>
                            <li role="presentation" class="active"><a href="../news/news.html">新闻</a></li>
                            <li role="presentation"><a href="../aboutMe/about-me.html">关于我们</a></li>
                        </ul>
                    </div>
                    <div class="col-xs-2  hidden-lg hidden-md">
                        <div class="dropdown">
                            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                                <span class="glyphicon glyphicon-align-left" aria-hidden="true"></span>
                            </button>
                            <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenu1">
                                <li><a href="../index.html">首页</a></li>
                                <li><a href="../news/news.html">新闻</a></li>
                                <li><a href="../aboutMe/about-me.html">关于我们</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        <div class="banner"><img src="../assets/新闻动态banner.png" alt=""></div>
        <div class="container">
            <div class="content row">
                <!-- 这里是列表渲染 -->
                <div class="content-item col-md-6">
                    <div class="item-left">
                        <img data-src="" alt="" class="lazyload">
                        <!-- <img src="../assets/banner2.jpg" alt=""> -->
                    </div>
                    <div class="item-right">
                        <div class="intro">
                            《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                        </div>
                        <div class="create-at">
                            <!-- 2015年 10月 16日 -->
                        </div>
                        <div class="detailed hidden-xs">
                            <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                        </div>
                    </div>
                </div>
                <div class="content-item col-md-6"">
                <div class=" item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
            <div class="content-item col-md-6">
                <div class="item-left">
                    <img data-src="" alt="" class="lazyload">
                    <!-- <img src="../assets/banner2.jpg" alt=""> -->
                </div>
                <div class="item-right">
                    <div class="intro">
                        《初任》 汉克·皮姆 借由自己所发现的一种可以改变物体大小的亚原子粒子“皮姆粒子”来从事英雄活动，是 复仇者 的创始成员之一。
                    </div>
                    <div class="create-at">
                        <!-- 2015年 10月 16日 -->
                    </div>
                    <div class="detailed hidden-xs">
                        <!-- 前工程师斯科特（保罗·路德 Paul Rudd
                        饰）由于劫富济贫进了监狱，出狱后的他为了争取看望女儿的权利又走上了盗窃之路。没想到一次意外的偷盗事件让他成为了新一代“蚁人”，老蚁人汉克.皮姆博士（迈克尔·道格拉斯 Michael
                        Douglas 饰）成为了他的导师，可皮姆博士的女儿霍普（伊万杰琳·莉莉 Evangeline Lilly 饰）却并不看好他。 -->
                    </div>
                </div>
            </div>
        </div>
        <div class="pagination">
            <button class="before">< </button>
                    <span>1</span>
                    <span>2</span>
                    <span>3</span>
            <button class="after"> > </button>
        </div>
    </div>
    </div>
    <footer>
        <div class="container footer">
            <div class="row information">
                <div class="col-md-3 col-xs-4 info-item">
                    <img src="../assets/location.png" alt="" srcset="">
                    <div class="description clearfix">
                        成都市武侯区
                    </div>
                </div>
                <div class="col-md-3 col-xs-4 info-item">
                    <img src="../assets/emial.png" alt="" srcset="">
                    <div class="description clearfix">
                        email@admain.com.cn
                    </div>
                </div>
                <div class="col-md-3 col-xs-4 info-item">
                    <img src="../assets/telephone.png" alt="" srcset="">
                    <div class="description clearfix">  
                        123-482-2684
                    </div>
                </div>
                <div class="col-md-3 col-xs-8 col-xs-offset-2 col-md-offset-0 info-item special">
                    <img src="../assets/mmqrcode1627285639457.png" alt="" srcset="">
                    <div class="description clearfix">
                        扫一扫添加微信
                    </div>
                </div>
            </div>
        </div>
        <div class="copyright">
            版权所有@Aoshisen
        </div>
</footer>
</body>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js" rel="external nofollow"></script>
<script src="https://cdn.bootcss.com/popper.js/1.12.5/umd/popper.min.js" rel="external nofollow"></script>
<script src="https://cdn.bootcss.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="../js/lazysize.js"></script>
<script>
    let contentDatas;
    let contentItems = document.querySelectorAll(".content-item");
    // console.log(contentItems);
    //页面渲染逻辑  
    let render = function () {
        // let page=2
       let search = location.search?location.search:"?page=1"
    //    console.log(location)
    //    console.log(search.slice(1));
       var a = new URLSearchParams(search);
       let page = a.get('page')
        axios({
            method: "post",
            url: `https://api.apiopen.top/getWangYiNews?page=${page}&count=8`,
        }).then((res) => {
            contentDatas = res.data.result;
            // console.log(contentDatas);
            contentItems.forEach((item, index) => {
                let img = item.querySelector(".item-left img");
                let intro = item.querySelector(".item-right .intro");
                let createAt = item.querySelector('.item-right .create-at')
                let detailed = item.querySelector(".item-right .detailed")
                img.setAttribute('data-src', contentDatas[index].image)
                img.removeAttribute('src')
                img.src = contentDatas[index].image
                intro.innerHTML = contentDatas[index].title
                createAt.innerHTML = contentDatas[index].passtime
                detailed.innerHTML = contentDatas[index].title.repeat(3)
                // console.log(img)
            })
        })
        let spans = document.querySelectorAll(".pagination span");
        spans.forEach((item, index) => {
            item.className = index + 1 == page ? "active" : ""
        })
    }
    render()
    //pagination 里面的跳转逻辑

    let search = location.search?location.search:"?page=1"
    var a = new URLSearchParams(search);
    let currentPage = a.get('page')
    let preButton = document.querySelector('.pagination .before');
    let afterButton = document.querySelector('.pagination .after');
    let spans = document.querySelectorAll("span")
    currentPage==1?preButton.remove():""
    preButton.addEventListener('click', () => {
        console.log(currentPage)
        currentPage = Math.max(1, --currentPage)
        window.location.href = `./news.html?page=${currentPage}`
        // render(currentPage)
    })
    console.log(currentPage,"currentPage");
    currentPage==3?afterButton.remove():""
    afterButton.addEventListener('click', () => {
        currentPage = Math.min(3, ++currentPage)
        window.location.href = `./news.html?page=${currentPage}`
        // render(currentPage)
    })
    spans.forEach((item, index) => {
        item.addEventListener('click', function () {
            currentPage = item.innerHTML
            window.location.href = `./news.html?page=${currentPage}`
            // render(currentPage)
        })
    })

    //每一个新闻点击跳转详情页的逻辑
    contentItems.forEach((item, index) => {
        item.addEventListener("click", () => {
            let host = location.host
            window.location.href = `../newsDetail/news-detail.html?page=${currentPage}&id=${index}`
        })
    })
</script>

</html>